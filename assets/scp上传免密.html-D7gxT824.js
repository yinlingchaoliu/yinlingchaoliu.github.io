import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as s,c as e,f as a}from"./app-CtvCwAmI.js";const t={},i=a(`<h3 id="scp上传免密" tabindex="-1"><a class="header-anchor" href="#scp上传免密"><span>scp上传免密</span></a></h3><p>问题: 一个expect脚本 不支持多个上传交互 解决方案 拆分 expect脚本 for循环</p><p>scp.sh</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token shebang important">#!/usr/bin/expect -f</span>

<span class="token builtin class-name">set</span> <span class="token function">timeout</span> <span class="token number">30</span>

<span class="token comment"># 传递第一个参数</span>
<span class="token builtin class-name">set</span> <span class="token function">file</span> <span class="token punctuation">[</span>lindex <span class="token variable">$argv</span> <span class="token number">0</span><span class="token punctuation">]</span>

<span class="token comment"># 上传文件</span>

spawn <span class="token function">scp</span> <span class="token variable">$file</span> root@101.168.1.1:/root/tomcat/bin

<span class="token comment"># expect &quot;*yes/no*&quot;</span>
<span class="token comment"># send &quot;yes\\r&quot;</span>

<span class="token function">expect</span> <span class="token string">&quot;*password:&quot;</span>
send <span class="token string">&quot;xxxxxx<span class="token entity" title="\\r">\\r</span>&quot;</span>

<span class="token function">expect</span> eof
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="统一上传" tabindex="-1"><a class="header-anchor" href="#统一上传"><span>统一上传</span></a></h3><p>upload.sh</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/sh</span>

./scp.sh ./ruoyi-admin/target/ruoyi-admin.jar

<span class="token function">sleep</span> <span class="token number">2</span>

./scp.sh ry.sh

<span class="token function">sleep</span> <span class="token number">2</span>

./scp.sh port.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,7),c=[i];function p(l,o){return s(),e("div",null,c)}const m=n(t,[["render",p],["__file","scp上传免密.html.vue"]]),u=JSON.parse('{"path":"/server/env/scp%E4%B8%8A%E4%BC%A0%E5%85%8D%E5%AF%86.html","title":"scp上传免密","lang":"zh-CN","frontmatter":{"title":"scp上传免密","date":"2024-03-24T11:47:50.000Z","order":12,"category":["server"],"tag":["env"],"description":"scp上传免密 问题: 一个expect脚本 不支持多个上传交互 解决方案 拆分 expect脚本 for循环 scp.sh 统一上传 upload.sh","head":[["meta",{"property":"og:url","content":"https://yinlingchaoliu.github.io/server/env/scp%E4%B8%8A%E4%BC%A0%E5%85%8D%E5%AF%86.html"}],["meta",{"property":"og:site_name","content":"引领潮流"}],["meta",{"property":"og:title","content":"scp上传免密"}],["meta",{"property":"og:description","content":"scp上传免密 问题: 一个expect脚本 不支持多个上传交互 解决方案 拆分 expect脚本 for循环 scp.sh 统一上传 upload.sh"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-04-27T06:23:39.000Z"}],["meta",{"property":"article:author","content":"引领潮流"}],["meta",{"property":"article:tag","content":"env"}],["meta",{"property":"article:published_time","content":"2024-03-24T11:47:50.000Z"}],["meta",{"property":"article:modified_time","content":"2024-04-27T06:23:39.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"scp上传免密\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2024-03-24T11:47:50.000Z\\",\\"dateModified\\":\\"2024-04-27T06:23:39.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"引领潮流\\",\\"url\\":\\"https://www.jianshu.com/u/bdcce32c05dd\\"}]}"]]},"headers":[{"level":3,"title":"scp上传免密","slug":"scp上传免密","link":"#scp上传免密","children":[]},{"level":3,"title":"统一上传","slug":"统一上传","link":"#统一上传","children":[]}],"git":{"createdTime":1714041564000,"updatedTime":1714199019000,"contributors":[{"name":"引领潮流","email":"heat13@qq.com","commits":2}]},"readingTime":{"minutes":0.37,"words":111},"filePathRelative":"server/env/scp上传免密.md","localizedDate":"2024年3月24日","excerpt":"<h3>scp上传免密</h3>\\n<p>问题: 一个expect脚本 不支持多个上传交互\\n解决方案 拆分 expect脚本 for循环</p>\\n<p>scp.sh</p>\\n<div class=\\"language-bash\\" data-ext=\\"sh\\" data-title=\\"sh\\"><pre class=\\"language-bash\\"><code><span class=\\"token shebang important\\">#!/usr/bin/expect -f</span>\\n\\n<span class=\\"token builtin class-name\\">set</span> <span class=\\"token function\\">timeout</span> <span class=\\"token number\\">30</span>\\n\\n<span class=\\"token comment\\"># 传递第一个参数</span>\\n<span class=\\"token builtin class-name\\">set</span> <span class=\\"token function\\">file</span> <span class=\\"token punctuation\\">[</span>lindex <span class=\\"token variable\\">$argv</span> <span class=\\"token number\\">0</span><span class=\\"token punctuation\\">]</span>\\n\\n<span class=\\"token comment\\"># 上传文件</span>\\n\\nspawn <span class=\\"token function\\">scp</span> <span class=\\"token variable\\">$file</span> root@101.168.1.1:/root/tomcat/bin\\n\\n<span class=\\"token comment\\"># expect \\"*yes/no*\\"</span>\\n<span class=\\"token comment\\"># send \\"yes\\\\r\\"</span>\\n\\n<span class=\\"token function\\">expect</span> <span class=\\"token string\\">\\"*password:\\"</span>\\nsend <span class=\\"token string\\">\\"xxxxxx<span class=\\"token entity\\" title=\\"\\\\r\\">\\\\r</span>\\"</span>\\n\\n<span class=\\"token function\\">expect</span> eof\\n</code></pre></div>","autoDesc":true}');export{m as comp,u as data};
